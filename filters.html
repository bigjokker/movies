<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Filters</title>
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png?v=1">
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background-color: #121212; color: #e0e0e0; }
        button { background-color: #333; color: #e0e0e0; border: 1px solid #444; padding: 5px 10px; cursor: pointer; margin-left: 5px; }
        button:hover { background-color: #444; }
        #rangeButtons { display: flex; gap: 5px; }
        .activeBtn { background-color: #555; border-color: #888; font-weight: bold; }
        #genresContainer label, #moodsContainer label { display: block; }
        #applyFilters, #cancelFilters { margin-top: 10px; }
        input { font-size: 16px; }
    </style>
</head>
<body>
    <h2>Filters</h2>
    <h3>Date Range</h3>
    <div id="rangeButtons">
        <button id="btn6m">Last 6 Months</button>
        <button id="btnAll">All Time</button>
    </div>
    <h3>Year Range</h3>
    <input type="number" id="minYear" placeholder="Min Year (e.g. 2000)" min="1900" max="2100">
    <input type="number" id="maxYear" placeholder="Max Year (e.g. 2025)" min="1900" max="2100">
    <h3>Genres</h3>
    <div id="genresContainer"></div>
    <h3>Mood Tags</h3>
    <div id="moodsContainer"></div>
    <h3>Search</h3>
    <input type="text" id="searchInput" placeholder="Search for a movie...">
    <h3>Actor Search</h3>
    <input type="text" id="actorInput" placeholder="Actor names, comma separated...">
    <button id="applyFilters">Apply</button>
    <button id="cancelFilters">Cancel</button>

    <script>
        let dateRange = localStorage.getItem('selectedRange') || '6m';
        let selectedGenres = JSON.parse(localStorage.getItem('selectedGenres')) || [];
        let selectedMoods = JSON.parse(localStorage.getItem('selectedMoods')) || [];
        let searchQuery = localStorage.getItem('searchQuery') || '';
        let actorQuery = localStorage.getItem('actorQuery') || '';
        let minYear = localStorage.getItem('minYear') || '';
        let maxYear = localStorage.getItem('maxYear') || '';

        const btn6m = document.getElementById('btn6m');
        const btnAll = document.getElementById('btnAll');

        const genres = [
            {id: 28, name: 'Action'},
            {id: 12, name: 'Adventure'},
            {id: 16, name: 'Animation'},
            {id: 35, name: 'Comedy'},
            {id: 80, name: 'Crime'},
            {id: 18, name: 'Drama'},
            {id: 10751, name: 'Family'},
            {id: 14, name: 'Fantasy'},
            {id: 27, name: 'Horror'},
            {id: 10749, name: 'Romance'},
            {id: 878, name: 'Science Fiction'},
            {id: 53, name: 'Thriller'}
        ];

        const moods = [
            {id: 9672, name: 'Feel-Good'},
            {id: 9715, name: 'Thrilling'},
            {id: 9760, name: 'Thought-Provoking'},
            {id: 9673, name: 'Heartwarming'},
            {id: 9733, name: 'Inspiring'},
            {id: 9713, name: 'Suspenseful'},
            {id: 17296, name: 'Whimsical'}
        ];

        function updateActiveButton() {
            btn6m.classList.toggle('activeBtn', dateRange === '6m');
            btnAll.classList.toggle('activeBtn', dateRange === 'all');
        }

        btn6m.onclick = () => {
            dateRange = '6m';
            updateActiveButton();
        };

        btnAll.onclick = () => {
            dateRange = 'all';
            updateActiveButton();
        };

        const genresContainer = document.getElementById('genresContainer');
        genres.forEach(genre => {
            const label = document.createElement('label');
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.value = genre.id;
            checkbox.checked = selectedGenres.includes(genre.id);
            label.appendChild(checkbox);
            label.appendChild(document.createTextNode(genre.name));
            genresContainer.appendChild(label);
        });

        const moodsContainer = document.getElementById('moodsContainer');
        moods.forEach(mood => {
            const label = document.createElement('label');
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.value = mood.id;
            checkbox.checked = selectedMoods.includes(mood.id);
            label.appendChild(checkbox);
            label.appendChild(document.createTextNode(mood.name));
            moodsContainer.appendChild(label);
        });

        const searchInput = document.getElementById('searchInput');
        searchInput.value = searchQuery;

        const actorInput = document.getElementById('actorInput');
        actorInput.value = actorQuery;

        const minYearInput = document.getElementById('minYear');
        minYearInput.value = minYear;

        const maxYearInput = document.getElementById('maxYear');
        maxYearInput.value = maxYear;

        document.getElementById('applyFilters').onclick = () => {
            selectedGenres = [];
            genresContainer.querySelectorAll('input:checked').forEach(cb => {
                selectedGenres.push(parseInt(cb.value));
            });
            selectedMoods = [];
            moodsContainer.querySelectorAll('input:checked').forEach(cb => {
                selectedMoods.push(parseInt(cb.value));
            });
            localStorage.setItem('selectedGenres', JSON.stringify(selectedGenres));
            localStorage.setItem('selectedMoods', JSON.stringify(selectedMoods));
            searchQuery = searchInput.value.trim();
            localStorage.setItem('searchQuery', searchQuery);
            actorQuery = actorInput.value.trim();
            localStorage.setItem('actorQuery', actorQuery);
            localStorage.setItem('minYear', minYearInput.value);
            localStorage.setItem('maxYear', maxYearInput.value);
            localStorage.setItem('selectedRange', dateRange);
            location.href = 'index.html';
        };

        document.getElementById('cancelFilters').onclick = () => {
            location.href = 'index.html';
        };

        updateActiveButton();
    </script>
</body>
</html>
